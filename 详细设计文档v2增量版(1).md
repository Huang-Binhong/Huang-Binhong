# 详细设计文档 v2增量版

**版本：v2.0
 日期：2025-11**

------

# 0. 本次版本更新说明

对比《详细设计文档 v1.0》，v2.0 的新增内容包括：

### **🆕 一、功能模块新增**

1. **AI 临摹功能**
   - 用户上传图片 → 生成黄宾虹笔墨风格版本。（可采用豆包）
2. **VR 创作（沉浸式作品空间）**
   - 3D 场景中展示作品笔墨空间，可拖拽观察。 （可采用混元3D模型）
3. **AI 讲解功能**
   - AI 自动解析作品：笔法、构图、墨色、题款、故事讲解。
4. **作品放大镜（超高清）优化**
   - 局部动态放大
   - 采样点自动识别笔触纹理
5. **关系网络增强**
   - 节点结构优化（分类：师承 / 友人 / 学生 / 机构）
   - 增加人物图像
   - 增加事件型关系（如“同参加某画展”）

### **🆕 二、技术架构扩展**

1. 新增 **AI 服务层（微服务）**
2. 新增 **大模型推理服务接口（LLM）**
3. 增加 **多媒体处理管线**（高清视频、超高清图片）

### **🆕 三、数据库结构增强**

- 增加：风格迁移任务表、场景生成任务表
- 作品表新增字段：VR 3D场景图像路径 / UHD 图像路径

### **🆕 四、前端 UI & UX 改版**

- 作品详情页新增「局部放大」、「AI讲解」按钮
- 新增「AI 创作中心」，内含「AI临摹」、「AI场景生成」

------

# 1. 项目背景 & 目标

### **1.3 v2 新增目标**

为满足更沉浸式、交互式、智能化的数字艺术体验，本版本新增以下目标：

- **加入“可沉浸、可互动、可溯源”的沉浸式体验模块**
   包括AI 3D场景生成、AI讲解功能。
- **增强用户参与度**
   提供 AI 临摹、作品细节探索。

------

# 2. 功能需求

## 2.1 核心新增模块总览

| 新增模块                | 描述                                         | 价值                       |
| ----------------------- | -------------------------------------------- | -------------------------- |
| **AI 讲解**             | 对作品进行笔法分析、风格解析、故事说明       | 增强教育价值、降低理解门槛 |
| **AI 临摹**             | 用户上传图像 → 生成黄宾虹风格作品            | 增加参与性与娱乐性         |
| **VR 创作**             | 用户在 VR 空间中浏览作品，并生成虚拟笔墨体验 | 创造沉浸体验               |
| **作品放大镜 Ultra-HD** | 超高清图像 + 动态局部放大                    | 强化专业体验               |
| **关系图谱强化**        | 更多人物属性、事件关系、节点类型             | 专业研究价值提升           |

------

# 3. 新增功能设计

## 🌟 **3.1 AI 临摹（新增）**

### 场景说明

用户上传任意图片 → 系统生成黄宾虹风格版本

### 流程

1. 上传用户图片
2. AI 风格迁移 → 生成墨色、笔触模拟结果
3. 返回图像
4. 可选择保存 / 分享

------

## 🌟 **3.2 VR 创作（新增）**

### 功能说明

- 在 3D 空间中渲染黄宾虹作品
- 用户可拖拽观察全景
- 可加载 AI 生成的视频内容
- 支持 VR 模式（WebXR）

前端采用：

- three.js + WebXR

------

## **🌟3.3 AI 讲解系统（新增）**

### 功能说明

AI 自动解析作品的一切内容，包括：

- 笔法说明（披麻皴、点苔等）
- 墨色层次分析
- 色彩、布局、构图解释
- 题款与用印结构分析
- 作品背后的故事生成

### 前端表现（新增）

- 作品详情页新增“AI 讲解”按钮
- 点击后弹出 AI 讲解面板
- 支持切换讲解模式（专业/通俗/学术）

------



## 🌟 **3.4 作品放大镜（增强）**

- 支持 4K / 8K 超清图
- 鼠标 hover 自动放大笔触区域
- 支持比对模式（原图 / 强化纹理）

------



## 🌟 **3.5 关系网络增强**

新增功能：

- 人物分类（师承、友人、学生、机构）
- 事件型关系（如“共同参加 XX 展览”）
- 节点图像显示

------

# 4. 系统架构（新增内容）

## **4.1 新增“AI 服务层（微服务）”**

```
前端  → API Gateway → 后端核心服务
                        ↑
                        │
                   AI 服务层（新）
                   ├── Explain Service（LLM）
                   ├── Style Transfer Service（图像）
                   ├── Video Gen Service（视频）
                   └── VR Asset Generator（模型/纹理）
```

------

# 5. 数据库设计（新增部分）

### 新增表：AIExplainRecord

| 字段        | 类型     |
| ----------- | -------- |
| id          | uuid     |
| workId      | uuid     |
| explainText | text     |
| styleTags   | json     |
| createdAt   | datetime |

### 新增表：AIStyleTransferTask

| 字段 | 类型 |
 | taskId | uuid |
 | inputImageUrl | text |
 | resultImageUrl | text |
 | status | enum |

### 新增字段（作品表 Work）

- `uhdImageUrl`（新增）
- `aiExplainText`（新增）
- `vrVideoUrl`（新增）

------

# 6. 前端设计 v2（增量）

### 首页新增版块：

- AI 创作中心入口（内含AI临摹生成图片、360°全景图片生成）

### 新增页面：

- `/ai` —— AI 创作中心

### 作品详情页新增组件：

- AI 讲解按钮
- UHD 放大镜组件

------

# 7. 后端设计 v2（增量）

新增模块：

- AIController
- AIService
- VideoService
- TaskQueue（用于视频/图片处理）

新增安全机制：

- AI 任务请求需管理员额度限制
- 任务排队防止滥用

------

# 8. 测试策略（增量）

### 新增 AI 相关测试：

- 讲解结果语义正确性
- 风格迁移质量检查
- VR 360°图片能否正常体验

