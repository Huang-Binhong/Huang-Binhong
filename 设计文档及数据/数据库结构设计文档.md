# 黄宾虹书画艺术大展数字平台 – 数据库结构设计文档

## 概述

本数据库结构设计文档针对“黄宾虹书画艺术大展”数字人文平台的后台数据库，采用 **MySQL** 关系型数据库建模，满足平台各项功能需求。设计涵盖平台核心实体：**人物（Person）**、**作品（Work）**、**生平事件（Event）**、**地点（Location）**、**人际关系（Relation）** 五大类数据表。所有表和字段均遵循**小写加下划线**命名规范（例如：`person_id`，`created_at`），字符数据使用 UTF8MB4 字符集以支持中文内容。

设计的表结构力求符合第三范式，使用主外键建立表间关联，保证数据完整性。同时，为满足接口文档中的功能（分页、筛选、模糊查询、关系绑定等），各表提供必要的字段和索引支持。例如，人物表包含姓名和别名字段以支持按姓名/别名的模糊搜索；作品表包含类别、时期、材质等字段以支持多条件筛选查询；关系表设计用于连接人物实体，支持按关系类型及人物筛选关系数据。下面将详细说明各数据表的结构设计及字段含义，并提供实体关系（E-R）概览。

## 实体关系概览（E-R 图）

平台各实体及其关系如下：

- **Person–Event（人物–事件）**：*一对多关系*。每个人物可关联多个生平事件，一个事件记录隶属于某个人物（通过外键 `person_id` 关联）。例如，黄宾虹拥有其出生、求学、游历等多个事件记录。
- **Person–Work（人物–作品）**：*一对多关系*。每位人物（画家）可创作多件作品，每件作品记录通过 `person_id` 关联其作者人物。对于黄宾虹，其所有画作和书法作品都归属黄宾虹这一定义的作者；设计考虑未来扩展到其他艺术家时，此关联仍适用。
- **Person–Relation（人物–人物关系）**：*自引用多对多关系*。关系表用于表示两个人物之间的一种关联。例如“师生”、“朋友”等。关系通过 `from_person_id` 和 `to_person_id` 两个外键分别指向关联的两个人物，实现人物间多对多连接。对于无向关系（如朋友），存储一条记录即可（检索某人物关系时，会查询作为源或目标的所有关系）；对于有向关系（如师生），约定例如老师作为 `from_person_id`，学生作为 `to_person_id` 来记录关系。每个人物可以作为多个关系的起点或终点。
- **Location–Event（地点–事件）**：*一对多关系*。地点表记录地理位置，每条生平事件可选关联一个地点（外键 `location_id`）。这样能够支持在交互式地图上呈现黄宾虹的游历行迹：多个事件按时间序列连接不同地点。一个地点可对应多条事件记录（例如黄宾虹多次前往“上海”参加不同活动，则有多条事件指向上海这个地点）。
- **其它关系**：地点与人物、作品暂无直接关联。但人物出生地等信息可以作为事件记录（如出生事件关联地点）；作品的现藏地点可在作品描述中提及或扩展字段设计。在当前设计中未单独建立人物/作品与地点的直接关联，以保持模型简洁。

*注：* 所有主键 (`*_id`) 均为自增整数。各外键 (`person_id` 等) 建立适当的外键约束（InnoDB 引擎）以确保引用完整性，默认删除操作采取级联或限制策略以防止产生孤立数据（例如，删除人物前需先删除关联事件和关系，或采用 ON DELETE CASCADE 策略自动清除关联记录）。

## 数据表设计

以下对每个数据表提供结构定义和字段数据字典说明，包括字段类型、是否允许为空、主键/外键标记、字段含义及示例值。

### persons（人物表）

**用途：** 存储平台中人物的核心信息，包括黄宾虹及与其相关的历史人物。支持按姓名或别名的模糊搜索、人物详情查看、人物新增/更新等功能。

**表结构：**

| 字段名     | 数据类型     | 是否为空 | 键（PK/FK） | 说明                    | 示例值              |
| ---------- | ------------ | -------- | ----------- | ----------------------- | ------------------- |
| person_id  | INT          | 否       | PK          | 人物ID，主键，自增      | 1                   |
| name       | VARCHAR(100) | 否       |             | 姓名（真人物姓名）      | 黄宾虹              |
| alias      | VARCHAR(100) | 是       |             | 别名/号，如人物字、号等 | 宾虹（号）          |
| birth_date | DATE         | 是       |             | 出生日期                | 1865-01-27          |
| death_date | DATE         | 是       |             | 去世日期（如适用）      | 1955-03-25          |
| biography  | TEXT         | 是       |             | 人物生平简介            | 清末民初画家...     |
| created_at | DATETIME     | 否       |             | 记录创建时间            | 2025-11-18 08:00:00 |
| updated_at | DATETIME     | 否       |             | 最后更新时间            | 2025-11-18 09:00:00 |

### 例子数据

人物表存储平台中人物的基本信息。以下是一个人物记录的示例数据：

```
json复制编辑{
  "person_id": 1,
  "name": "黄宾虹",
  "alias": "宾虹",
  "birth_date": "1865-01-27",
  "death_date": "1955-03-25",
  "biography": "黄宾虹，浙江金华人，近现代山水画家，号宾虹，学术深厚，尤以黄山画作著名。",
  "created_at": "2025-11-18 08:00:00",
  "updated_at": "2025-11-18 09:00:00"
}
```

*说明:*

- `name` 和 `alias` 字段将用于支持人物的关键词模糊查询，例如通过 `WHERE name LIKE '%关键词%' OR alias LIKE '%关键词%'` 实现搜索。建议在这两个字段上建立索引或全文索引以优化搜索性能（对于中文可考虑使用全文索引方式）。
- `birth_date`/`death_date` 可用于计算年龄、在时间轴中标识出生和去世节点等。如果精确日期不详，可仅存年份或留空，并通过事件表记录出生/去世事件作为补充。
- `biography` 提供人物的简要介绍，可在人物详情页显示。
- 时间戳字段 `created_at`、`updated_at` 采用默认当前时间戳记，便于追踪记录变更。

### works（作品表）

**用途：** 存储黄宾虹的书画作品信息，以及潜在扩展的其他相关作品。支持根据类别、时期、材质等条件筛选作品列表、作品模糊搜索、作品详情查看等功能。

**表结构：**

| 字段名         | 数据类型     | 是否为空 | 键（PK/FK）          | 说明                                   | 示例值              |
| -------------- | ------------ | -------- | -------------------- | -------------------------------------- | ------------------- |
| work_id        | INT          | 否       | PK                   | 作品ID，主键，自增                     | 101                 |
| person_id      | INT          | 否       | FK→persons.person_id | 作者人物ID，外键，关联创作者           | 1 (黄宾虹)          |
| title          | VARCHAR(255) | 否       |                      | 作品标题/名称                          | 《黄山纪游图》      |
| category       | VARCHAR(50)  | 否       |                      | 作品类别（如画作、书法）               | 画作                |
| style_period   | VARCHAR(50)  | 是       |                      | 创作时期（风格阶段，如早期/中期/晚期） | 晚期作品            |
| material       | VARCHAR(100) | 是       |                      | 材质媒介（如纸本设色、水墨绢本等）     | 纸本设色            |
| creation_date  | DATE         | 是       |                      | 创作日期/年份                          | 1947-01-01 (年份约) |
| description    | TEXT         | 是       |                      | 作品描述/简介                          | 写生于黄山...       |
| work_image_url | VARCHAR(255) | 是       |                      | 作品高清图像的存储路径或URL            | uploads/101.jpg     |
| created_at     | DATETIME     | 否       |                      | 记录创建时间                           | 2025-11-18 08:05:00 |
| updated_at     | DATETIME     | 否       |                      | 最后更新时间                           | 2025-11-18 09:10:00 |

### 例子数据

作品表存储黄宾虹的画作、书法等作品信息。以下是一个作品记录的示例数据：

```
json复制编辑{
  "work_id": 101,
  "person_id": 1,
  "title": "黄山纪游图",
  "category": "画作",
  "style_period": "晚期",
  "material": "纸本设色",
  "creation_date": "1947-01-01",
  "description": "黄山纪游图是黄宾虹创作的代表性山水画之一，描绘了黄山的壮丽景色。",
  "image_url": "/images/works/huangshan.jpg",
  "created_at": "2025-11-18 08:30:00",
  "updated_at": "2025-11-18 09:10:00"
}
```

*说明:*

- `person_id` 是作品作者的引用，在本项目中大部分作品为黄宾虹本人创作，但此设计允许扩展以容纳其他艺术家的作品（如将来拓展到齐白石等）。通过该外键，可实现从人物详情查看其所有作品列表等功能。
- `category`、`style_period`、`material` 对应接口查询的筛选参数字段。例如：前端请求 `/api/v1/works?category=画作&stylePeriod=早期` 会据此在作品表过滤类别为“画作”、风格时期为“早期”的作品集合。建议对这些筛选字段建立索引，以提高查询性能。
- `style_period` 反映作品在黄宾虹生涯中的创作时期（如**早期**、**中期**、**晚期**），可根据作品创作年份划分或由录入者指定。这个字段有助于按艺术风格阶段筛选作品，与界面上的“人物时期”筛选对应。
- `creation_date` 精确到日期，可用于记录作品完成时间。如果只有年份，可约定使用该年第一天表示或仅填充年份部分。在排序或统计时，可利用此字段（例如按照创作时间升序/降序排序作品列表）。
- `image_url` 保存作品图像资源的路径，方便前端读取高清大图实现自由缩放观看。
- 通过 `title` 字段（以及可能扩展的其他属性）支持作品名称的模糊搜索查询（如 `search` 参数可匹配作品标题）。

### events（生平事件表）

**用途：** 存储人物生平大事记或经历节点，用于构建人物**生平时间轴**功能。每条事件记录关联到相应人物，并可选关联发生地点，用于地图交互展示。支持按人物查询其全部事件（按年份排序）、事件新增/修改等。

**表结构：**

| 字段名            | 数据类型     | 是否为空 | 键（PK/FK）          | 说明                                       | 示例值                                                       |
| ----------------- | ------------ | -------- | -------------------- | ------------------------------------------ | ------------------------------------------------------------ |
| event_id          | INT          | 否       | PK                   | 事件ID，主键，自增                         | 1                                                            |
| person_id         | INT          | 否       | FK→persons.person_id | 所属人物ID，外键，指明该事件属于谁         | 1 (黄宾虹)                                                   |
| event_date        | DATE         | 是       |                      | 事件发生日期（可用年份或具体日期）         | 1865-01-27                                                   |
| title             | VARCHAR(255) | 否       |                      | 事件标题                                   | '出生于浙江金华'                                             |
| description       | TEXT         | 是       |                      | 事件简短描述                               | '1月27日黄宾虹出生于浙江金华...'                             |
| type              | VARCHAR(50)  | 否       |                      | 事件类型，如'birth'（出生）                | 'birth'                                                      |
| location          | VARCHAR(100) | 是       |                      | 事件发生地点                               | '浙江金华'                                                   |
| period            | VARCHAR(50)  | 是       |                      | 事件发生时期（如“早年求学”）               | '早年求学'                                                   |
| detailed_content  | TEXT         | 是       |                      | 事件详细内容                               | '黄宾虹，原名原字，号宾虹，...'                              |
| historical_events | JSON         | 是       |                      | 与事件相关的历史事件（数组）               | ['江南制造总局在上海成立', '捉军...']                        |
| images            | JSON         | 是       |                      | 关联图片信息（包括图像 URL、alt、caption） | [{'id': 1, 'url': '/images/bio/birthplace.jpg', 'alt': '金华铁道岔头居', 'caption': '黄宾虹出生地—浙江金华铁道岔头街'}] |
| created_at        | DATETIME     | 否       |                      | 记录创建时间                               | 2025-11-18 08:10:00                                          |
| updated_at        | DATETIME     | 否       |                      | 最后更新时间                               | 2025-11-18 09:25:00                                          |

### 例子数据：

```
{
  "event_id": 1,
  "person_id": 1,
  "event_date": "1865-01-27",
  "title": "出生于浙江金华",
  "description": "1月27日黄宾虹出生于浙江金华...",
  "type": "birth",
  "location": "浙江金华",
  "period": "早年求学",
  "detailed_content": "黄宾虹，原名原字，号宾虹，1865年1月27日出生于浙江金华的一个书香门第...",
  "historical_events": [
    "江南制造总局在上海成立",
    "捉军在山东青州开天赋格林苏部"
  ],
  "images": [
    {
      "id": 1,
      "url": "/images/bio/birthplace.jpg",
      "alt": "金华铁道岔头居",
      "caption": "黄宾虹出生地—浙江金华铁道岔头街"
    }
  ],
  "created_at": "2025-11-18 08:10:00",
  "updated_at": "2025-11-18 09:25:00"
}
```

### locations（地点表）

**用途：** 存储地理位置信息，用于构建**游历地图**等功能。人物生平事件可引用该表以标记事件发生地。支持地点列表、地点详情管理，便于管理员维护地名及坐标。

**表结构：**

| 字段名      | 数据类型     | 是否为空 | 键（PK/FK） | 说明               | 示例值                       |
| ----------- | ------------ | -------- | ----------- | ------------------ | ---------------------------- |
| location_id | INT          | 否       | PK          | 地点ID，主键，自增 | 10                           |
| name        | VARCHAR(100) | 否       |             | 地点名称           | 上海                         |
| latitude    | DECIMAL(9,6) | 是       |             | 纬度坐标           | 31.23037                     |
| longitude   | DECIMAL(9,6) | 是       |             | 经度坐标           | 121.47370                    |
| description | VARCHAR(255) | 是       |             | 地点描述/备注      | 上海市，黄宾虹曾长期居住于此 |
| created_at  | DATETIME     | 否       |             | 记录创建时间       | 2025-11-18 08:15:00          |
| updated_at  | DATETIME     | 否       |             | 最后更新时间       | 2025-11-18 09:20:00          |

### 例子数据

地点表存储与事件或作品相关的地点信息。以下是一个地点记录的示例数据：

```
json复制编辑{
  "location_id": 10,
  "name": "浙江金华",
  "latitude": 29.0781,
  "longitude": 119.6528,
  "description": "黄宾虹出生地，位于浙江省金华市。",
  "created_at": "2025-11-18 08:50:00",
  "updated_at": "2025-11-18 09:30:00"
}
```

*说明:*

- `name` 为地点名称，通常采用通用称谓（如城市名“上海”或具体场所“西湖”）。必要时可在 `description` 中补充细节，例如所在国家、省份或地点的重要性。
- `latitude` 和 `longitude` 保存地点的地理坐标（WGS84坐标系，经纬度）。这些坐标将用于前端地图展示，以点标形式呈现人物足迹。坐标精度可根据需要调整，小数点后6位可达亚米级精度。对于暂未确定坐标的地点，该字段可留空，仅以名称表示。
- 事件表通过 `location_id` 引用地点，实现地点与事件的关联。通过地点ID也可反查发生在该地点的所有事件（若需要相关功能，可在事件表按地点筛选）。
- 如有大类别的地点（比如国家、城市分类），本设计暂未细分地点类型。如有需要，后续可添加字段例如 `type` 或外联到行政区域表来丰富地点信息。

### relations（人际关系表）

**用途：** 存储人物之间的关系网络数据，用于构建**人物关系图谱**交互功能。每条记录表示两个人物之间的一种关系（有向或无向），并标明关系类型。支持查询全部关系、按关系类型或人物筛选关系，以及人物详情页中展示其相关人物网。管理员可通过接口添加/编辑人物关系。

**表结构：**

| 字段名         | 数据类型    | 是否为空 | 键（PK/FK）          | 说明                         | 示例值                          |
| -------------- | ----------- | -------- | -------------------- | ---------------------------- | ------------------------------- |
| relation_id    | INT         | 否       | PK                   | 关系ID，主键，自增           | 5001                            |
| from_person_id | INT         | 否       | FK→persons.person_id | 起始人物ID，外键，关系发起者 | 1 (黄宾虹)                      |
| to_person_id   | INT         | 否       | FK→persons.person_id | 目标人物ID，外键，关系指向者 | 20 (齐白石)                     |
| relation_type  | VARCHAR(50) | 否       |                      | 关系类型（人物间关系的类别） | 朋友                            |
| description    | TEXT        | 是       |                      | 关系描述/备注（交往详情等）  | 交往于1940年代，共同参加画展... |
| created_at     | DATETIME    | 否       |                      | 记录创建时间                 | 2025-11-18 08:20:00             |
| updated_at     | DATETIME    | 否       |                      | 最后更新时间                 | 2025-11-18 09:25:00             |

### 例子数据

人际关系表存储人物之间的关系信息。以下是一个人物之间的关系记录的示例数据：

```
json复制编辑{
  "relation_id": 5001,
  "from_person_id": 1,
  "to_person_id": 20,
  "relation_type": "朋友",
  "description": "黄宾虹与齐白石是朋友，并共同参与多个艺术展览。",
  "created_at": "2025-11-18 08:40:00",
  "updated_at": "2025-11-18 09:20:00"
}
```

*说明:*

- `from_person_id` 和 `to_person_id` 分别引用人物表中的两位相关人物ID，均设置为非空并建立外键约束。对于对等关系（如朋友、同事），这两个字段的先后顺序可不影响关系语义；对于非对等关系（如师生），建议统一约定一个方向，例如“师→徒”表示老师为 `from_person_id`，学生为 `to_person_id`。查询某人物的所有关系时，将检索 **from_person_id** 或 **to_person_id** 等于该人物ID的记录。
- `relation_type` 用于描述关系类别，比如**师生**、**朋友**、**合作**、**家人**等。该字段支持通过查询参数过滤，例如请求 `/api/v1/relations?type=朋友` 将返回所有朋友关系。值可以采用中文描述或预先定义的英文编码。为了数据一致性，可在应用层限定取值范围或通过枚举/字典表维护可选关系类型。
- `description` 可选，用于记录该关系的补充信息，如交往经过、起止时间等。例如：“交往于1940年代，共同参加过某展览”等。前端在关系图谱中，用户悬停节点/连线时可显示该描述以提供背景。
- 为保证同一对人物间不重复记录关系，可考虑联合约束 (UNIQUE) `from_person_id`+`to_person_id`（以及必要时也考虑类型）。对于无向关系，可以在插入时保持人物ID的大小顺序一致，或查询时双向考虑，以避免重复。
- 由于关系图谱的潜在查询频繁，建议在 `from_person_id` 和 `to_person_id` 上建立索引，便于快速按人物ID检索其相关关系。此外，`relation_type` 也可加索引用于类型筛选。

## 接口功能支持与设计考量

本数据库设计充分考虑了接口文档中提出的主要功能需求，确保结构上能够高效支持**分页、筛选、模糊查询**以及各实体间的**关联绑定**：

- **分页支持**：所有主数据表（人物、作品等）都采用自增主键，并可根据需要在查询中使用 `ORDER BY` 主键或特定排序字段配合 `LIMIT offset, size` 实现分页。响应中会包含总记录数以支持前端分页展示。数据库设计上主键均有索引，分页查询性能良好；如需按其他字段排序分页（例如作品按标题或创作日期排序），建议确保相应字段已建立索引。
- **筛选查询**：针对不同资源提供的筛选参数，在表结构中都有对应字段支撑。例如作品的 **类别 (`category`)**、**时期 (`style_period`)**、**材质 (`material`)** 字段用于实现多条件过滤；关系的 **类型 (`relation_type`)** 以及双方人物ID 用于关系筛选。这些字段大多取值离散且频繁用于查询，宜加索引或枚举约束以优化筛选操作。
- **模糊查询**：人物姓名、别名以及作品标题等文本字段支持模糊匹配。数据库层面可采用 `LIKE` 查询操作符（如 `WHERE name LIKE '%关键词%'`），针对大型文本字段也可考虑 **FULLTEXT** 全文索引提升中文检索效率。设计中为此预留了必要的字段（如人物别名、作品描述等）承载可搜索内容。
- **关联绑定**：通过外键建立的表间关系保证了数据的可追溯和可关联。例如：
  - 前端获取人物详情时，可基于人物ID查询其关联的事件列表、作品列表、关系网络等，各表通过人物ID相互关联实现数据绑定。
  - 时间轴模块通过事件表中人物ID和日期，将人物生平按时间顺序串联；地图模块通过事件中的地点ID，将地点表的经纬度用于绘制行迹。
  - 人物关系图谱模块通过关系表，双向地检索相关人物节点并展示关系类型，实现更丰富的人物网络可视化。
  - 此外，数据库层的 **参照完整性** 确保了关联数据的一致：无法插入不存在人物的事件或关系记录，删除人物时关联的数据需一并处理，保持数据联动正确性。
- **扩展性**：设计预留了某些字段和机制以支持未来功能拓展。例如，作品表通过作者外键支持新增其他画家作品库的可能，人物关系类型可以扩充新的交往类型，事件表可根据需要增加类型字段以区分事件类别（如展览、任职、游历等）。数据库采用模块化的表设计，新功能（如用户上传书信手稿的功能）可在不破坏既有表的前提下，通过新增表或字段来实现。

## 推荐的 E-R 图布局

以下为本设计的实体关系示意描述：

- **Person**（人物）作为中心实体，关联 **Work**（作品）、**Event**（事件） 和 **Relation**（关系）等表：
  - Person –< Works： 一位人物可有多件作品；作品通过 `person_id` 关联作者。
  - Person –< Events： 一位人物可有多条生平事件；事件通过 `person_id` 归属人物。
  - Person –< Relations： 一位人物可参与多条关系记录，可能作为关系起点或终点。关系表的两条人物外键均指向 Person 表。
- **Location**（地点）独立管理地理信息，与 **Event** 表相连：
  - Location –< Events： 一个地点可关联多个事件；事件通过 `location_id` 引用地点。
- **Relation**（人际关系）作为连接人物的桥梁：
  - 每条 Relation 记录连接两个人物 (Person A ↔ Person B)，并带有关系类型属性。Relation 表相当于人物表的自关联实体，实现多人之间复杂网络关系。

上述结构可用E-R图表示各表间主外键关联。其中，**persons**、**works**、**events**、**locations**、**relations** 五表分别以其主键（粗体）与外键箭头连接：例如，persons.person_id ← (FK) events.person_id 表示人物表主键被事件表引用；relations 表有两条外键箭头指回 persons 表，体现人物间关系的双关联。地图交互和时间轴由事件串联人物和地点，关系网络由关系串联人物节点，整体共同支撑“黄宾虹书画艺术大展”数字平台的功能实现。