# API 测试文件
# 线上地址: https://show.shuanglin33984.xyz/
# 本地地址: http://localhost:8080
@baseUrl = http://localhost:8080
@apiUrl = {{baseUrl}}/api/v1

###############################################
# 数据库当前状态
###############################################
# Persons: 1 条记录（黄宾虹）
# Works: 332 条记录（黄宾虹书法作品）
# Events: 55 条记录（黄宾虹生平事件）
# Locations: 0 条记录（暂无数据）
# Relations: 0 条记录（暂无数据）

###############################################
# 1. 健康检查
###############################################

### 健康检查
GET {{baseUrl}}/health

###############################################
# 2. 人物 (Persons) API
###############################################

### 获取人物列表（默认分页）
GET {{apiUrl}}/persons

### 获取人物列表（带分页参数）
GET {{apiUrl}}/persons?page=1&pageSize=10

### 模糊搜索人物（按姓名）
GET {{apiUrl}}/persons?search=黄宾虹

### 模糊搜索人物（按别名）
GET {{apiUrl}}/persons?search=宾虹

### 获取单个人物详情（黄宾虹）
GET {{apiUrl}}/persons/1

### 获取不存在的人物（测试 404）
GET {{apiUrl}}/persons/999

### 创建新人物
POST {{apiUrl}}/persons
Content-Type: application/json

{
  "name": "齐白石",
  "alias": "白石",
  "birth_date": "1864-01-01",
  "death_date": "1957-09-16",
  "biography": "齐白石，湖南湘潭人，近现代著名画家、书法家、篆刻家。"
}

### 更新人物信息
PUT {{apiUrl}}/persons/1
Content-Type: application/json

{
  "biography": "黄宾虹，原名质，字朴存、朴岑、亦作朴丞、劈琴，号宾虹，别署予向、虹叟、黄山山中人等。近现代画家、学者。擅画山水，为山水画一代宗师。"
}

### 删除人物（谨慎操作！会级联删除相关数据）
# DELETE {{apiUrl}}/persons/1

###############################################
# 3. 人物嵌套路由
###############################################

### 获取黄宾虹的所有事件（按日期排序）
GET {{apiUrl}}/persons/1/events

### 为黄宾虹创建新事件
POST {{apiUrl}}/persons/1/events
Content-Type: application/json

{
  "title": "游历黄山",
  "type": "travel",
  "event_date": "1895-07-15",
  "location": "安徽黄山",
  "period": "青年时期",
  "description": "首次游历黄山，被其雄奇景色深深吸引。",
  "historical_events": ["甲午战争结束", "洋务运动进入新阶段"]
}

### 获取黄宾虹的所有关系（当前为空）
GET {{apiUrl}}/persons/1/relations

###############################################
# 4. 作品 (Works) API - 黄宾虹书法作品
###############################################

### 获取作品列表
GET {{apiUrl}}/works

### 获取作品列表（带分页）
GET {{apiUrl}}/works?page=1&pageSize=10

### 按类别筛选作品（书法）
GET {{apiUrl}}/works?category=书法

### 按人物筛选（黄宾虹的作品）
GET {{apiUrl}}/works?personId=1

### 模糊搜索作品（标题或描述）
GET {{apiUrl}}/works?search=草书

### 获取单个作品详情（第1件作品）
GET {{apiUrl}}/works/1

### 获取单个作品详情（第100件作品）
GET {{apiUrl}}/works/100

### 获取单个作品详情（第332件作品）
GET {{apiUrl}}/works/332

### 创建新书法作品（包含新字段）
POST {{apiUrl}}/works
Content-Type: application/json

{
  "person_id": 1,
  "title": "行书七言联",
  "category": "书法",
  "creation_year": "公元 1940 年",
  "dimensions": "136×34 厘米",
  "seal": "黄宾虹印",
  "inscription": "云山烟霭千峰秀，水绿花红万木春。",
  "material": "纸本墨笔",
  "creation_date": "1940-01-01",
  "work_image_url": "http://example.com/image.jpg"
}

### 更新作品信息
PUT {{apiUrl}}/works/1
Content-Type: application/json

{
  "dimensions": "72×23 厘米",
  "seal": "黄宾虹、宾虹草堂"
}

### 删除作品
# DELETE {{apiUrl}}/works/1

###############################################
# 5. 事件 (Events) API - 黄宾虹生平事件
###############################################

### 获取事件列表
GET {{apiUrl}}/events

### 获取事件列表（带分页）
GET {{apiUrl}}/events?page=1&pageSize=10

### 按人物筛选事件（黄宾虹）
GET {{apiUrl}}/events?personId=1

### 按事件类型筛选
GET {{apiUrl}}/events?type=早年求学

### 按时期筛选
GET {{apiUrl}}/events?period=早年求学

### 获取单个事件详情（第1个事件）
GET {{apiUrl}}/events/1

### 获取单个事件详情（第30个事件）
GET {{apiUrl}}/events/30

### 创建新事件
POST {{apiUrl}}/events
Content-Type: application/json

{
  "person_id": 1,
  "title": "举办个人画展",
  "type": "exhibition",
  "event_date": "1943-05-20",
  "location": "上海",
  "period": "中年时期",
  "description": "在上海举办个人山水画展，引起轰动。",
  "historical_events": ["抗日战争进入相持阶段", "上海处于日占时期"],
  "images": []
}

### 更新事件信息
PUT {{apiUrl}}/events/1
Content-Type: application/json

{
  "description": "黄宾虹于1865年1月27日出生于浙江金华铁岭头街的书香门第。"
}

### 删除事件
# DELETE {{apiUrl}}/events/1

###############################################
# 6. 地点 (Locations) API - 当前无数据
###############################################

### 获取地点列表（当前为空）
GET {{apiUrl}}/locations

### 获取地点列表（带分页）
GET {{apiUrl}}/locations?page=1&pageSize=10

### 获取不存在的地点（测试 404）
GET {{apiUrl}}/locations/1

### 创建新地点
POST {{apiUrl}}/locations
Content-Type: application/json

{
  "name": "浙江金华",
  "latitude": 29.0781,
  "longitude": 119.6528,
  "description": "黄宾虹出生地，位于浙江省金华市。"
}

### 创建地点（黄山）
POST {{apiUrl}}/locations
Content-Type: application/json

{
  "name": "安徽黄山",
  "latitude": 30.1339,
  "longitude": 118.1673,
  "description": "黄宾虹多次游历并创作的著名山水景点。"
}

### 更新地点信息
PUT {{apiUrl}}/locations/1
Content-Type: application/json

{
  "description": "浙江省金华市，黄宾虹的出生地和童年生活地，文化底蕴深厚。"
}

### 删除地点（注意：如果有事件关联会设为 NULL）
# DELETE {{apiUrl}}/locations/1

###############################################
# 7. 关系 (Relations) API - 当前无数据
###############################################

### 获取关系列表（当前为空）
GET {{apiUrl}}/relations

### 获取关系列表（带分页）
GET {{apiUrl}}/relations?page=1&pageSize=10

### 按关系类型筛选
GET {{apiUrl}}/relations?type=朋友

### 按人物筛选关系
GET {{apiUrl}}/relations?personId=1

### 获取不存在的关系（测试 404）
GET {{apiUrl}}/relations/1

### 创建新关系（需要先创建第二个人物）
POST {{apiUrl}}/relations
Content-Type: application/json

{
  "from_person_id": 1,
  "to_person_id": 2,
  "relation_type": "朋友",
  "description": "黄宾虹与齐白石是挚友，经常一起参加艺术活动。"
}

### 更新关系信息
PUT {{apiUrl}}/relations/1
Content-Type: application/json

{
  "description": "黄宾虹与齐白石是挚友，互相尊重，经常切磋画艺。"
}

### 删除关系
# DELETE {{apiUrl}}/relations/1

###############################################
# 8. 错误测试
###############################################

### 测试 404 错误（不存在的人物）
GET {{apiUrl}}/persons/999

### 测试 404 错误（不存在的作品）
GET {{apiUrl}}/works/999999

### 测试 404 错误（不存在的事件）
GET {{apiUrl}}/events/999

### 测试 400 错误（缺少必填字段）
POST {{apiUrl}}/persons
Content-Type: application/json

{
  "alias": "测试"
}

### 测试 400 错误（person_id 不存在）
POST {{apiUrl}}/works
Content-Type: application/json

{
  "person_id": 999,
  "title": "测试作品",
  "category": "书法"
}

###############################################
# 9. 复杂查询场景
###############################################

### 场景1：查看黄宾虹的完整资料

### 1. 基本信息
GET {{apiUrl}}/persons/1

### 2. 生平事件（55条）
GET {{apiUrl}}/persons/1/events

### 3. 作品集（332件书法作品）
GET {{apiUrl}}/works?personId=1

### 4. 人际关系（当前为空）
GET {{apiUrl}}/persons/1/relations

### 场景2：按时间线查看所有事件
GET {{apiUrl}}/events?personId=1&pageSize=100

### 场景3：浏览书法作品（分页）
GET {{apiUrl}}/works?category=书法&page=1&pageSize=20

### 场景4：搜索特定年代的作品
GET {{apiUrl}}/works?search=1940

###############################################
# 10. 数据统计查询
###############################################

### 查看总记录数（第一页即可看到 total）
GET {{apiUrl}}/persons?pageSize=1
###
GET {{apiUrl}}/works?pageSize=1
###
GET {{apiUrl}}/events?pageSize=1
###
GET {{apiUrl}}/locations?pageSize=1
###
GET {{apiUrl}}/relations?pageSize=1
